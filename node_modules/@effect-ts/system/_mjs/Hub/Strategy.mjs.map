{"version":3,"file":"Strategy.mjs","mappings":"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","names":["Chunk","Tp","T","pipe","P","MQ","U","Strategy","unsafeCompletePollers","hub","subscribers","subscription","pollers","keepPolling","nullPoller","empty","isEmpty","poller","poll","subPollerPair","tuple","remove","add","pollResult","unsafeOfferAll","prepend_","unsafePollAllQueue","unsafeCompletePromise","unsafeOnHubEmptySpace","unsafeCompleteSubscribers","BackPressure","constructor","Unbounded","handleSurplus","as","isShutdown","suspend","_","fiberId","promise","unsafeMake","unsafeOffer","get","interrupt","await","succeedWith","unsafeRemove","shutdown","asUnit","do","publishers","forEachPar_","last","interruptAs","unit","isFull","publisher","published","publish","it","Symbol","iterator","curr","next","done","offer","value","filter_","a","Dropping","_hub","_subscribers","_as","_isShutdown","succeed","Sliding","unsafeSlidingPublish","capacity","loop","slide","pub"],"sourceRoot":"","sources":["../../_src/Hub/Strategy.ts"],"sourcesContent":[null]}