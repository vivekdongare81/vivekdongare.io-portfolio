{"version":3,"file":"Strategy.js","mappings":"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","names":["Strategy","unsafeCompletePollers","hub","subscribers","subscription","pollers","keepPolling","nullPoller","empty","isEmpty","poller","poll","subPollerPair","Tp","tuple","remove","add","pollResult","U","unsafeOfferAll","Chunk","prepend_","unsafePollAllQueue","unsafeCompletePromise","unsafeOnHubEmptySpace","unsafeCompleteSubscribers","BackPressure","constructor","MQ","Unbounded","handleSurplus","as","isShutdown","T","suspend","_","fiberId","promise","P","unsafeMake","unsafeOffer","get","interrupt","await","succeedWith","unsafeRemove","shutdown","asUnit","do","publishers","forEachPar_","last","interruptAs","unit","isFull","publisher","published","publish","it","Symbol","iterator","curr","next","done","offer","value","filter_","a","Dropping","_hub","_subscribers","_as","_isShutdown","succeed","Sliding","unsafeSlidingPublish","capacity","loop","slide","pub"],"sourceRoot":"","sources":["../_src/Hub/Strategy.ts"],"sourcesContent":[null]}