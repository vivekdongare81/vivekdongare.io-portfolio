import{useState as e,useRef as t,useEffect as n}from"react";export default function(r,u){void 0===r&&(r=!1),void 0===u&&(u={enterDelay:0,exitDelay:0});var o=e(r),c=o[0],i=o[1],l=e(!1),a=l[0],f=l[1],d=t(),m=t(null),s=t(u);return n(function(){s.current=u},[u]),n(function(){d.current&&clearTimeout(d.current);var e=s.current,t=e.enterDelay,n=e.exitDelay,u=e.onUnmount;if(r)m.current=Date.now(),i(!0),-1===t?"requestIdleCallback"in window?window.requestIdleCallback(function(){f(!0)},{timeout:100}):setTimeout(function(){f(!0)},1):0===t?f(!0):d.current=setTimeout(function(){f(!0)},t);else{f(!1);var o=n;if(m.current){var c=Date.now()-m.current;t&&c<t?o=0:n&&c<n&&(o=c)}0===o?(i(!1),m.current&&(null==u||u())):d.current=setTimeout(function(){i(!1),m.current&&(null==u||u())},o)}},[r]),{mounted:c,rendered:a}}
